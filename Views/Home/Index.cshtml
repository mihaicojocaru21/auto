@model List<Auto.Models.Car>

@{
    ViewData["Title"] = "Car Dealership";
}

<h1>Car Dealership</h1>

@if (TempData["Message"] != null)
{
    <div style="background: #d4edda; color: #155724; padding: 10px; margin-bottom: 15px; border-radius: 5px;">
        @TempData["Message"]
    </div>
}

@if (TempData["Error"] != null)
{
    <div style="background: #f8d7da; color: #721c24; padding: 10px; margin-bottom: 15px; border-radius: 5px;">
        @TempData["Error"]
    </div>
}

<p><strong>Total Cars:</strong> @ViewBag.TotalCars</p>
<p><strong>Sold Cars:</strong> @ViewBag.SoldCars</p>
<p><strong>Total Unsold Value:</strong> @ViewBag.TotalValue.ToString("N0") EUR</p>

<table border="1" cellpadding="10" style="border-collapse: collapse; width: 100%;">
    <thead style="background: #2c3e50; color: white;">
        <tr>
            <th>Brand</th>
            <th>Model</th>
            <th>Year</th>
            <th>Price</th>
            <th>Status</th>
            <th>Action</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var car in Model)
        {
            <tr style="@(car.Sold ? "background: #f8d7da;" : "")">
                <td><strong>@car.Brand</strong></td>
                <td>@car.Model</td>
                <td>@car.Year</td>
                <td>@car.Price.ToString("N0") EUR</td>
                <td>
                    @if (car.Sold)
                    {
                        <span style="color: #e74c3c; font-weight: bold;">🔴 SOLD</span>
                    }
                    else
                    {
                        <span style="color: #27ae60; font-weight: bold;">🟢 Available</span>
                    }
                </td>
                <td>
                    @if (!car.Sold)
                    {
                        <a asp-action="Sell" asp-route-id="@car.Id" 
                           style="background: #27ae60; color: white; padding: 5px 15px; text-decoration: none; border-radius: 3px;">
                            Sell
                        </a>
                    }
                    else
                    {
                        <span style="color: #7f8c8d;">Already sold</span>
                    }
                </td>
            </tr>
        }
    </tbody>
</table>

<br />

<a asp-action="Reset" 
   style="background: #e74c3c; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px;"
   onclick="return confirm('Are you sure you want to reset all cars?')">
    Reset All Cars
</a>